(this["webpackJsonpshopping-tracking-list"]=this["webpackJsonpshopping-tracking-list"]||[]).push([[0],{107:function(e,t,n){e.exports=n(123)},123:function(e,t,n){"use strict";n.r(t);var a=n(0),r=n.n(a),c=n(11),i=n.n(c),o=n(12),l=n(66),u=n.n(l),s=n(78),m=n(29),E=(n(117),n(69)),f=n(79),p=n.n(f),g=n(14),b={preferredCurrency:"USD"},d={rates:{ILS:1,USD:1}},v=n(24),O=function(e,t){return{type:"SET_ITEM_RECIEVED_STATUS",itemId:e,recieved:t}},h={items:[]},y={alerts:[]},j=Object(m.c)({userSettings:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:b,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"SET_USER_PREFERRED_CURRENCY":var n=t;return Object(g.a)(Object(g.a)({},e),{},{preferredCurrency:n.currency});default:return e}},currencyRates:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:d,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"UPDATE_CURRENCY_RATES":var n=t,a=n.rates;return Object(g.a)(Object(g.a)({},e),{},{rates:a});default:return e}},itemsState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:h,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_NEW_ITEM":var n=t,a=n.item;return Object(g.a)(Object(g.a)({},e),{},{items:[].concat(Object(v.a)(e.items),[a])});case"SET_ITEM_RECIEVED_STATUS":var r=t,c=r.recieved,i=r.itemId;return Object(g.a)(Object(g.a)({},e),{},{items:e.items.map((function(e){return e.id===i?Object(g.a)(Object(g.a)({},e),{},{recieved:c}):e}))});default:return e}},alertsState:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:y,t=arguments.length>1?arguments[1]:void 0;switch(t.type){case"ADD_ALERT":var n=t,a=n.alert;return Object(g.a)(Object(g.a)({},e),{},{alerts:[].concat(Object(v.a)(e.alerts),[a])});case"REMOVE_ALERT":var r=t,c=r.alertId;return Object(g.a)(Object(g.a)({},e),{},{alerts:e.alerts.filter((function(e){return e.id!==c}))});default:return e}}}),S={key:"root",storage:p.a},C=Object(E.a)(S,j);var T=Object(m.d)(C,m.a.apply(void 0,[])),I=(Object(E.b)(T),function(){return T.getState().alertsState.alerts.some((function(e){return"ALERT_FAILED_TO_FETCH_EXCHANGE_RATES"===e.id}))}),w=function(){var e=Object(s.a)(u.a.mark((function e(){var t,n,a,r,c;return u.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:if(t=T.dispatch,e.prev=1,n="https://api.exchangeratesapi.io/latest"){e.next=5;break}throw new Error("Exchange rates api isn't defined");case 5:return e.next=7,fetch(n);case 7:return a=e.sent,e.next=10,a.json();case 10:r=e.sent,I()&&t({type:"REMOVE_ALERT",alertId:"ALERT_FAILED_TO_FETCH_EXCHANGE_RATES"}),t({type:"UPDATE_CURRENCY_RATES",rates:r.rates}),e.next=18;break;case 15:e.prev=15,e.t0=e.catch(1),I()||t({type:"ADD_ALERT",alert:{id:"ALERT_FAILED_TO_FETCH_EXCHANGE_RATES",message:"An error occured while trying to fetch exchange rates, Please check your connectivity(Prices might not be up to date)",severity:"warning"}});case 18:c=1e3*Number("10"),setTimeout(w,c);case 20:case"end":return e.stop()}}),e,null,[[1,15]])})));return function(){return e.apply(this,arguments)}}(),_=n(57),D=n(38),R=n(163),N=n(198),k=n(195),A=n(168),L=Object(R.a)((function(e){return Object(N.a)({root:{position:"absolute",bottom:e.spacing(2),left:e.spacing(2)}})})),x=function(){var e=Object(o.c)((function(e){return e.alertsState})).alerts,t=L();return r.a.createElement("div",{className:t.root},e.map((function(e){return r.a.createElement(k.a,{severity:e.severity},r.a.createElement(A.a,null,"Warning"),e.message)})))},F=n(15),U=n(177),B=n(178),M=n(173),P=n(167),H=n(52),Y=n(87),W=n.n(Y),V=n(199),G=n(172),X=n(85),J=n.n(X),z=n(84),$=n.n(z),q=n(124),K=n(169),Q=n(170),Z=function(e){var t=e.icon,n=e.route,a=e.title,c=e.onClick,i=Object(D.g)(),o=Object(D.f)(),l=n===i.pathname;return r.a.createElement(q.a,{button:!0,selected:l,onClick:function(){o.push(n),c()}},r.a.createElement(K.a,null,t),r.a.createElement(Q.a,{primary:a}))},ee=Object(R.a)((function(e){return Object(N.a)({list:{width:e.spacing(32)}})})),te=function(e){var t=e.open,n=e.onClose,a=ee();return r.a.createElement(V.a,{anchor:"left",open:t,onClose:n},r.a.createElement(G.a,{className:a.list},r.a.createElement(Z,{icon:r.a.createElement($.a,null),title:"Bought",route:"/bought",onClick:n}),r.a.createElement(Z,{icon:r.a.createElement(J.a,null),title:"Recieved",route:"/recieved",onClick:n})))},ne=n(192),ae=n(176),re=["USD","ILS"];Object.freeze(re);var ce=Object(R.a)((function(e){return Object(N.a)({select:{marginLeft:e.spacing(1)},label:{marginTop:"auto",marginBottom:"auto",color:"greenyellow"},selectIcon:{color:"white"},selectText:{color:"white"}})})),ie=function(e){var t=e.className,n=Object(o.c)((function(e){return e.userSettings})),a=ce(),c=Object(o.b)();return r.a.createElement(M.a,{className:t,container:!0,direction:"row"},r.a.createElement(M.a,{item:!0,className:a.label},r.a.createElement(H.a,null,"Select Preferable Currency")),r.a.createElement(M.a,{item:!0,className:a.select},r.a.createElement(ne.a,{value:n.preferredCurrency,classes:{icon:a.selectIcon,select:a.selectText},disableUnderline:!0,onChange:function(e){return c({type:"SET_USER_PREFERRED_CURRENCY",currency:e.target.value})}},re.map((function(e){return r.a.createElement(ae.a,{key:e,value:e},e)})))))},oe=Object(R.a)((function(e){return Object(N.a)({toolbarItem:{marginTop:"auto",marginBottom:"auto"},icon:{marginTop:"auto",marginBottom:"auto",color:"white"},offset:e.mixins.toolbar})})),le=function(){var e=oe(),t=Object(a.useState)(!1),n=Object(F.a)(t,2),c=n[0],i=n[1],o=Object(D.g)();return r.a.createElement(a.Fragment,null,r.a.createElement(U.a,{position:"fixed"},r.a.createElement(B.a,null,r.a.createElement(M.a,{container:!0,direction:"row",justify:"space-between"},r.a.createElement(P.a,{edge:"start",className:e.icon,onClick:function(){return i(!0)}},r.a.createElement(W.a,null)),r.a.createElement(H.a,{className:e.toolbarItem,variant:"h5"},function(e){switch(e){case"/recieved":return"Recieved";case"/bought":case"/":default:return"Bought"}}(o.pathname)),r.a.createElement(M.a,{item:!0,className:e.toolbarItem},r.a.createElement(ie,null))))),r.a.createElement("div",{className:e.offset}),r.a.createElement(te,{open:c,onClose:function(){return i(!1)}}))},ue=n(193),se=n(185),me=n(71),Ee=n(186),fe=n(183),pe=n(179),ge=n(180),be=n(181),de=n(182),ve=n(90),Oe=n.n(ve),he=function(e){switch(e){case"USD":return"$";case"ILS":return"\u20aa"}},ye=n(88),je=n.n(ye),Se=r.a.memo((function(e){var t=e.dateISO,n=e.toColor,a=new Date(t);a.setHours(0,0,0,0);var c=a.getTime(),i=new Date;i.setHours(0,0,0,0);var o,l=i.getTime();n&&(o=c<l?"red":c===l?"orange":"green");var u=je()(a).format("DD-MM-YYYY");return r.a.createElement(H.a,{style:{color:o}},u)})),Ce=n(89),Te=n.n(Ce),Ie=function(){var e=Object(o.c)((function(e){return e.currencyRates})).rates,t=Object(o.c)((function(e){return e.userSettings})).preferredCurrency;return function(n,a,r){var c=null!==r&&void 0!==r?r:t;return n/e[a]*e[c]}},we=Object(R.a)((function(e){return Object(N.a)({root:{minWidth:e.spacing(40),margin:e.spacing(2)},date:{marginTop:e.spacing(.5)},storeLabel:{marginTop:"auto",marginBottom:"auto",marginLeft:e.spacing(1)},actionIcon:{marginLeft:e.spacing(1)}})})),_e=function(e){var t=e.item,n=we(),a=Object(o.c)((function(e){return e.userSettings})).preferredCurrency,c=Object(o.b)(),i=Ie(),l=t.id,u=t.recieved,s=t.name,m=t.store,E=t.price,f=t.priceCurrency,p=t.deliveryDateISO,g=i(E,f);return r.a.createElement(pe.a,{className:n.root,elevation:4},r.a.createElement(ge.a,null,r.a.createElement(M.a,{container:!0,direction:"row",justify:"space-between"},r.a.createElement(M.a,{item:!0},r.a.createElement(H.a,{variant:"subtitle1"},s),r.a.createElement(H.a,{variant:"subtitle2"},g.toFixed(2),he(a))),r.a.createElement(M.a,{item:!0,className:n.date},r.a.createElement(Se,{dateISO:p,toColor:!u})))),r.a.createElement(be.a,null,r.a.createElement(M.a,{container:!0,direction:"row",justify:"space-between"},r.a.createElement(M.a,{item:!0,className:n.storeLabel},r.a.createElement(H.a,{variant:"subtitle2"},"From ",m)),r.a.createElement(M.a,{item:!0},u?r.a.createElement(de.a,{variant:"outlined",onClick:function(){return c(O(l,!1))}},"Still waiting",r.a.createElement(Te.a,{className:n.actionIcon})):r.a.createElement(de.a,{variant:"outlined",onClick:function(){return c(O(l,!0))}},"Recieved",r.a.createElement(Oe.a,{className:n.actionIcon}))))))},De=function(e){var t=e.items;return r.a.createElement(fe.a,null,t.map((function(e){return r.a.createElement(_e,{key:e.id,item:e})})))},Re=function(e){var t={};return e.forEach((function(e){t[e.store]||(t[e.store]=[]),t[e.store].push(e)})),t},Ne=n(184),ke=Object(R.a)((function(e){return Object(N.a)({root:{minWidth:e.spacing(40),maxWidth:e.spacing(80),margin:e.spacing(2)},content:{paddingBottom:e.spacing(1)}})})),Ae=function(e){var t=e.items,n=e.store,c=ke(),i=Ie(),l=Object(o.c)((function(e){return e.userSettings})).preferredCurrency,u=t.reduce((function(e,t){return e+i(t.price,t.priceCurrency)}),0),s=he(l);return r.a.createElement(pe.a,{className:c.root,elevation:4},r.a.createElement(ge.a,{classes:{root:c.content}},r.a.createElement(H.a,{gutterBottom:!0,variant:"h6"},n),t.map((function(e){return r.a.createElement(a.Fragment,{key:e.id},r.a.createElement(M.a,{container:!0,direction:"row",justify:"space-between"},r.a.createElement(M.a,{item:!0},r.a.createElement(H.a,{variant:"subtitle2"},e.name)),r.a.createElement(M.a,{item:!0},r.a.createElement(H.a,{variant:"caption"},i(e.price,e.priceCurrency).toFixed(2),s))))}))),r.a.createElement(Ne.a,null),r.a.createElement(be.a,null,r.a.createElement(M.a,{container:!0,direction:"row",justify:"space-between"},r.a.createElement(M.a,{item:!0},r.a.createElement(H.a,null,"Total of ",t.length," items")),r.a.createElement(M.a,{item:!0},r.a.createElement(H.a,null,"Total price: ",u.toFixed(2),s)))))},Le=function(e){var t=function(e){return Object(a.useMemo)((function(){return Re(e)}),[e])}(e.items);return r.a.createElement(a.Fragment,null,Object.keys(t).map((function(e){return r.a.createElement(Ae,{key:e,store:e,items:t[e]})})))},xe=Object(R.a)((function(e){return{root:{width:"100%"}}})),Fe=function(e){var t=e.items,n=Object(a.useState)("list"),c=Object(F.a)(n,2),i=c[0],o=c[1],l=xe(),u=t.sort((function(e,t){return new Date(e.deliveryDateISO).getTime()-new Date(t.deliveryDateISO).getTime()}));return r.a.createElement("div",{className:l.root},r.a.createElement(me.a,{value:i},r.a.createElement(U.a,{position:"static"},r.a.createElement(ue.a,{variant:"fullWidth",value:i,onChange:function(e,t){return o(t)}},r.a.createElement(se.a,{label:"List",value:"list"}),r.a.createElement(se.a,{label:"Stores Aggregations",value:"stores-aggregations"}))),r.a.createElement(Ee.a,{value:"list"},r.a.createElement(De,{items:u})),r.a.createElement(Ee.a,{value:"stores-aggregations"},r.a.createElement(Le,{items:u}))))},Ue=n(191),Be=n(93),Me=n.n(Be),Pe=n(187),He=n(188),Ye=n(189),We=n(190),Ve=n(92),Ge=n.n(Ve),Xe=n(196),Je=n(201),ze=n(194),$e=Object(Je.a)(),qe=function(e){var t=e.value,n=e.onChange,c=e.classes,i=Object(o.c)((function(e){return e.itemsState})).items,l=Object(a.useMemo)((function(){var e=Re(i);return Object.keys(e)}),[i]);return r.a.createElement(ze.a,{value:t,onChange:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e,t){n(t)})),options:l,selectOnFocus:!0,clearOnBlur:!0,filterOptions:function(e,t){var n=$e(e,t);return n.length?n:!l.length&&!t.inputValue?["Start typing to add a new store"]:[t.inputValue]},renderInput:function(e){return r.a.createElement(Xe.a,Object.assign({},e,{classes:c,label:"Select Store",variant:"outlined"}))},freeSolo:!0})},Ke=Object(R.a)((function(e){return Object(N.a)({field:{marginTop:e.spacing(2)},currencySelector:{marginLeft:e.spacing(1)}})})),Qe=function(e){var t=e.onChange,n=e.storeItem,a=Ke();return r.a.createElement(M.a,{container:!0,direction:"column"},r.a.createElement(Xe.a,{label:"Name",variant:"outlined",value:n.name,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return t({name:e.target.value})}))}),r.a.createElement(qe,{value:n.store,classes:{root:a.field},onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return t({store:null!==e&&void 0!==e?e:""})}))}),r.a.createElement(M.a,{container:!0,className:a.field,item:!0,direction:"row"},r.a.createElement(Xe.a,{label:"Price",variant:"outlined",type:"number",value:n.price,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return t({price:Number(e.target.value)})}))}),r.a.createElement(ne.a,{className:a.currencySelector,value:n.priceCurrency,onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return t({priceCurrency:e.target.value})}))},re.map((function(e){return r.a.createElement(ae.a,{value:e,key:e},e)})))),r.a.createElement(Xe.a,{classes:{root:a.field},label:"Estimated Delivery Date",type:"date",variant:"outlined",InputLabelProps:{shrink:!0},onChange:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}((function(e){return t({deliveryDateISO:new Date(e.target.value).toISOString()})}))}))},Ze=n(197),et=Object(R.a)((function(e){return Object(N.a)({closeButton:{position:"absolute",right:e.spacing(1),top:e.spacing(1),color:e.palette.grey[500]}})})),tt=function(e){var t=e.open,n=e.onClose,c=Object(o.c)((function(e){return e.userSettings})),i=Object(a.useState)({priceCurrency:c.preferredCurrency}),l=Object(F.a)(i,2),u=l[0],s=l[1],m=et(),E=Object(o.b)(),f=u.name&&u.deliveryDateISO&&u.price&&u.priceCurrency&&u.store;return r.a.createElement(Pe.a,{open:t,disableBackdropClick:!0,onClose:n},r.a.createElement(He.a,{disableTypography:!0},r.a.createElement(H.a,{variant:"h6"},"New Item"),r.a.createElement(P.a,{className:m.closeButton,onClick:n},r.a.createElement(Ge.a,null))),r.a.createElement(Ye.a,{dividers:!0},r.a.createElement(Qe,{onChange:function(e){return s(Object(g.a)(Object(g.a)({},u),e))},storeItem:u})),r.a.createElement(We.a,null,r.a.createElement(de.a,{onClick:n},"Cancel"),r.a.createElement(de.a,{disabled:!f,onClick:function(){if(u.name&&u.deliveryDateISO&&u.price&&u.priceCurrency&&u.store){var e={name:u.name,store:u.store,price:u.price,priceCurrency:u.priceCurrency,deliveryDateISO:u.deliveryDateISO,recieved:!1,id:Object(Ze.a)()};E({type:"ADD_NEW_ITEM",item:e}),n()}}},"Add")))},nt=Object(R.a)((function(e){return Object(N.a)({fab:{position:"absolute",bottom:e.spacing(4),right:e.spacing(4)},fabIcon:{marginRight:e.spacing(1)}})})),at=function(e){var t=Object(a.useState)(!1),n=Object(F.a)(t,2),c=n[0],i=n[1],o=nt();return r.a.createElement(a.Fragment,null,r.a.createElement(Ue.a,{color:"primary",variant:"extended",className:o.fab,onClick:function(){return i(!0)}},r.a.createElement(Me.a,{className:o.fabIcon}),"Add Item"),c&&r.a.createElement(tt,{open:c,onClose:function(){return i(!1)}}))},rt=function(){var e=Object(o.c)((function(e){return e.itemsState})).items.filter((function(e){return!e.recieved}));return r.a.createElement(M.a,{container:!0},r.a.createElement(Fe,{items:e}),r.a.createElement(at,null))},ct=function(){var e=Object(o.c)((function(e){return e.itemsState})).items.filter((function(e){return e.recieved}));return r.a.createElement(Fe,{items:e})};var it=function(){return r.a.createElement(_.a,null,r.a.createElement(le,null),r.a.createElement(x,null),r.a.createElement(D.c,null,r.a.createElement(D.a,{path:"/recieved"},r.a.createElement(ct,null)),r.a.createElement(D.a,{path:["/","/bought"]},r.a.createElement(rt,null))))};w(),i.a.render(r.a.createElement(r.a.StrictMode,null,r.a.createElement(o.a,{store:T},r.a.createElement(it,null))),document.getElementById("root"))}},[[107,1,2]]]);
//# sourceMappingURL=main.c6daa976.chunk.js.map